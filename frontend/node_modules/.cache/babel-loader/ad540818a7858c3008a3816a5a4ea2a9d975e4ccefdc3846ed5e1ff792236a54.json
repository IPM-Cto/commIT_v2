{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\muletto1\\\\WebstormProjects\\\\commIT_v2\\\\frontend\\\\src\\\\components\\\\PrivateRouteV2.js\",\n  _s = $RefreshSig$();\n// üîí PrivateRoute - Component per route protette\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport LoadingScreen from './LoadingScreen';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PrivateRoute = ({\n  children,\n  requiredUserType = null\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    user,\n    userType,\n    loading\n  } = useAuth();\n  console.log('üîí PrivateRoute check:', {\n    isAuthenticated,\n    userType,\n    requiredUserType,\n    loading\n  });\n\n  // Mostra loading mentre verifica auth\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingScreen, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Non autenticato -> redirect a login\n  if (!isAuthenticated) {\n    console.log('‚ùå Not authenticated, redirecting to login');\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Autenticato ma richiede tipo specifico\n  if (requiredUserType && userType !== requiredUserType) {\n    console.log(`‚ùå Wrong user type. Required: ${requiredUserType}, Got: ${userType}`);\n\n    // Redirect al dashboard corretto\n    if (userType === 'customer') {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/dashboard/customer\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 14\n      }, this);\n    } else if (userType === 'provider') {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/dashboard/provider\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 14\n      }, this);\n    } else if (userType === 'admin') {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/dashboard/admin\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Tutto ok, mostra il componente\n  console.log('‚úÖ Access granted');\n  return children;\n};\n_s(PrivateRoute, \"4k0Yw/ncy5w8RYBhpFG/bdoSWj0=\", false, function () {\n  return [useAuth];\n});\n_c = PrivateRoute;\nexport default PrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["React","Navigate","useAuth","LoadingScreen","jsxDEV","_jsxDEV","PrivateRoute","children","requiredUserType","_s","isAuthenticated","user","userType","loading","console","log","fileName","_jsxFileName","lineNumber","columnNumber","to","replace","_c","$RefreshReg$"],"sources":["C:/Users/muletto1/WebstormProjects/commIT_v2/frontend/src/components/PrivateRouteV2.js"],"sourcesContent":["// üîí PrivateRoute - Component per route protette\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport LoadingScreen from './LoadingScreen';\n\nconst PrivateRoute = ({ children, requiredUserType = null }) => {\n  const { isAuthenticated, user, userType, loading } = useAuth();\n\n  console.log('üîí PrivateRoute check:', {\n    isAuthenticated,\n    userType,\n    requiredUserType,\n    loading,\n  });\n\n  // Mostra loading mentre verifica auth\n  if (loading) {\n    return <LoadingScreen />;\n  }\n\n  // Non autenticato -> redirect a login\n  if (!isAuthenticated) {\n    console.log('‚ùå Not authenticated, redirecting to login');\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // Autenticato ma richiede tipo specifico\n  if (requiredUserType && userType !== requiredUserType) {\n    console.log(`‚ùå Wrong user type. Required: ${requiredUserType}, Got: ${userType}`);\n    \n    // Redirect al dashboard corretto\n    if (userType === 'customer') {\n      return <Navigate to=\"/dashboard/customer\" replace />;\n    } else if (userType === 'provider') {\n      return <Navigate to=\"/dashboard/provider\" replace />;\n    } else if (userType === 'admin') {\n      return <Navigate to=\"/dashboard/admin\" replace />;\n    }\n    \n    return <Navigate to=\"/\" replace />;\n  }\n\n  // Tutto ok, mostra il componente\n  console.log('‚úÖ Access granted');\n  return children;\n};\n\nexport default PrivateRoute;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,OAAO,QAAQ,yBAAyB;AACjD,OAAOC,aAAa,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,MAAMC,YAAY,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,gBAAgB,GAAG;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC9D,MAAM;IAAEC,eAAe;IAAEC,IAAI;IAAEC,QAAQ;IAAEC;EAAQ,CAAC,GAAGX,OAAO,CAAC,CAAC;EAE9DY,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE;IACpCL,eAAe;IACfE,QAAQ;IACRJ,gBAAgB;IAChBK;EACF,CAAC,CAAC;;EAEF;EACA,IAAIA,OAAO,EAAE;IACX,oBAAOR,OAAA,CAACF,aAAa;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC1B;;EAEA;EACA,IAAI,CAACT,eAAe,EAAE;IACpBI,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;IACxD,oBAAOV,OAAA,CAACJ,QAAQ;MAACmB,EAAE,EAAC,QAAQ;MAACC,OAAO;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACzC;;EAEA;EACA,IAAIX,gBAAgB,IAAII,QAAQ,KAAKJ,gBAAgB,EAAE;IACrDM,OAAO,CAACC,GAAG,CAAC,gCAAgCP,gBAAgB,UAAUI,QAAQ,EAAE,CAAC;;IAEjF;IACA,IAAIA,QAAQ,KAAK,UAAU,EAAE;MAC3B,oBAAOP,OAAA,CAACJ,QAAQ;QAACmB,EAAE,EAAC,qBAAqB;QAACC,OAAO;MAAA;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACtD,CAAC,MAAM,IAAIP,QAAQ,KAAK,UAAU,EAAE;MAClC,oBAAOP,OAAA,CAACJ,QAAQ;QAACmB,EAAE,EAAC,qBAAqB;QAACC,OAAO;MAAA;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACtD,CAAC,MAAM,IAAIP,QAAQ,KAAK,OAAO,EAAE;MAC/B,oBAAOP,OAAA,CAACJ,QAAQ;QAACmB,EAAE,EAAC,kBAAkB;QAACC,OAAO;MAAA;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACnD;IAEA,oBAAOd,OAAA,CAACJ,QAAQ;MAACmB,EAAE,EAAC,GAAG;MAACC,OAAO;IAAA;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpC;;EAEA;EACAL,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;EAC/B,OAAOR,QAAQ;AACjB,CAAC;AAACE,EAAA,CAxCIH,YAAY;EAAA,QACqCJ,OAAO;AAAA;AAAAoB,EAAA,GADxDhB,YAAY;AA0ClB,eAAeA,YAAY;AAAC,IAAAgB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}